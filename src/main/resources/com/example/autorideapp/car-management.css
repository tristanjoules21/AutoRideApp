<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.autorideapp.autoride.CarManagementController"
            stylesheets="@styles/car-theme.css">

    <!-- Sidebar left omitted (your existing sidebar can stay) -->

    <!-- Main Content -->
    <center>
        <HBox spacing="24" style="-fx-padding: 30;">

            <!-- Left: Car Table -->
            <VBox spacing="12" prefWidth="900">
                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label fx:id="mainTitle" styleClass="main-title" text="Car Management"/>
                    <Pane HBox.hgrow="ALWAYS"/>
                    <Button fx:id="addCarButton" text="+ Add New Car" onAction="#handleAddCar" styleClass="add-btn"/>
                </HBox>

                <TableView fx:id="carTable" prefHeight="700.0" styleClass="table-view">
                    <columns>
                        <TableColumn fx:id="modelColumn" text="Car" prefWidth="180"/>
                        <TableColumn fx:id="typeColumn" text="Type" prefWidth="100"/>
                        <TableColumn fx:id="yearColumn" text="Year" prefWidth="80"/>
                        <TableColumn fx:id="seatsColumn" text="Seats" prefWidth="80"/>
                        <TableColumn fx:id="transmissionColumn" text="Transmission" prefWidth="120"/>
                        <TableColumn fx:id="fuelTypeColumn" text="Fuel" prefWidth="100"/>
                        <TableColumn fx:id="priceColumn" text="Price/day" prefWidth="100"/>
                        <TableColumn fx:id="actionsColumn" text="Actions" prefWidth="120"/>
                    </columns>
                </TableView>
            </VBox>

            <!-- Right: Booking / Car Details Panel -->
            <VBox fx:id="detailsPane" spacing="18" prefWidth="500"
                  style="-fx-background-color: #ffffff; -fx-padding: 24; -fx-border-radius: 6; -fx-background-radius: 6;"
                  visible="false" managed="false">

                <!-- Car Image -->
                <StackPane style="-fx-alignment: center;">
                    <ImageView fx:id="carImageView" fitWidth="400" fitHeight="220" preserveRatio="true"/>
                </StackPane>

                <!-- Car Details -->
                <VBox spacing="8">
                    <Label fx:id="carTitle" style="-fx-font-size: 20px; -fx-font-weight: bold;"/>
                    <Label fx:id="carSubtitle" style="-fx-text-fill: #666;"/>
                    <Separator/>

                    <TextArea fx:id="carSpecs" wrapText="true" editable="false"
                              style="-fx-background-color:transparent; -fx-padding:0; -fx-border-width:0;" prefRowCount="6"/>

                    <Separator/>

                    <!-- Booking Panel -->
                    <VBox spacing="10" style="-fx-background-color: #f7f7f7; -fx-padding: 12; -fx-border-radius:8; -fx-background-radius:8;">
                        <Label text="Book this Car" style="-fx-font-weight: bold;"/>
                        <Label fx:id="bookCarModel" style="-fx-text-fill: #444;"/>
                        <Label text="Price/day" style="-fx-font-size: 12px; -fx-text-fill: #999;"/>
                        <Label fx:id="bookPrice" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>

                        <Label text="Pick up / Return Dates" style="-fx-font-size: 12px; -fx-text-fill: #999;"/>
                        <DatePicker fx:id="pickupDate" promptText="Pick up" onAction="#onDateChanged"/>
                        <DatePicker fx:id="returnDate" promptText="Return" onAction="#onDateChanged"/>

                        <Label text="Total" style="-fx-text-fill: #999; -fx-padding:6 0 0 0;"/>
                        <Label fx:id="totalLabel" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>

                        <HBox spacing="8" alignment="CENTER_RIGHT">
                            <Button text="Cancel" onAction="#onCancelBooking" style="-fx-background-color:transparent;"/>
                            <Button text="Book" onAction="#onBookNow" styleClass="table-action-book"/>
                        </HBox>
                    </VBox>
                </VBox>
            </VBox>
        </HBox>
    </center>
</BorderPane>
